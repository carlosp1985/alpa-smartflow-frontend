<div ng-controller="ProductoFormController">

   <div class="row">
      <div class="col s12">
         <h4 class="page-title">{{titulo}}</h4>
         <p class="page-subtitle">Completa los datos del producto.</p>
      </div>
   </div>

   <form name="formProducto" novalidate ng-submit="guardar()">
      <div class="row">
         <div class="input-field col s12 m6">
            <input id="codigo" type="text" ng-model="producto.codigo" required>
            <label for="codigo">Código</label>
            <span class="grey-text text-darken-1 right">Código único del producto.</span>
         </div>
         <div class="input-field col s12 m6">
            <input id="nombre" type="text" ng-model="producto.nombre" required>
            <label for="nombre">Nombre</label>
            <span class="grey-text text-darken-1 right">Nombre visible en el sistema.</span>
         </div>
      </div>

      <div class="row">
         <div class="input-field col s12 m6">
            <textarea id="descripcion" class="materialize-textarea" ng-model="producto.descripcion"></textarea>
            <label for="descripcion">Descripción</label>
            <span class="grey-text text-darken-1 right">Detalle opcional del producto.</span>
         </div>
         <div class="input-field col s12 m6">
            <select class="browser-default" ng-model="producto.categoria_id" required>
               <option value="" disabled>Selecciona una categoría</option>
               <option ng-repeat="c in categorias" value="{{c.id}}">{{c.nombre}}</option>
            </select>
            <label class="active" style="margin-top:-20px;">Categoría</label>
         </div>
      </div>

      <div class="row">
         <div class="input-field col s12 m4">
            <input id="precio_venta" type="number" step="0.01" ng-model="producto.precio_venta" required>
            <label for="precio_venta">Precio de venta</label>
            <span class="grey-text text-darken-1 right">Precio al que se vende al cliente.</span>
         </div>
         <div class="input-field col s12 m4">
            <input id="costo" type="number" step="0.01" ng-model="producto.costo" required>
            <label for="costo">Costo</label>
            <span class="grey-text text-darken-1 right">Costo de compra del producto.</span>
         </div>
         <div class="input-field col s12 m4">
            <input id="iva_porcentaje" type="number" step="0.01" ng-model="producto.iva_porcentaje">
            <label for="iva_porcentaje">IVA (%)</label>
            <span class="grey-text text-darken-1 right">Porcentaje de IVA aplicado.</span>
         </div>
      </div>

      <div class="row">
         <div class="input-field col s12 m4">
            <input id="stock_actual" type="number" ng-model="producto.stock_actual" required>
            <label for="stock_actual">Stock actual</label>
            <span class="grey-text text-darken-1 right">Unidades disponibles actualmente.</span>
         </div>
         <div class="input-field col s12 m4">
            <input id="stock_minimo" type="number" ng-model="producto.stock_minimo" required>
            <label for="stock_minimo">Stock mínimo</label>
            <span class="grey-text text-darken-1 right">Nivel mínimo antes de alertar.</span>
            <span class="red-text" ng-show="producto.stock_minimo > producto.stock_actual">
               El stock mínimo no puede ser mayor que el stock actual.
            </span>
         </div>
         <div class="col s12 m4" style="margin-top: 25px;">
            <label>
               <input type="checkbox" ng-model="producto.activo" />
               <span>Producto activo</span>
            </label>
         </div>
      </div>

      <div class="row spacer-top">
         <div class="col s12 right-align">
            <a class="btn-flat" ng-click="cancelar()">Cancelar</a>
            <button
               type="submit"
               class="btn waves-effect waves-light blue"
               ng-disabled="formProducto.$invalid || (producto.stock_minimo > producto.stock_actual)">
               Guardar
               <i class="material-icons right">save</i>
            </button>
         </div>
      </div>

   </form>

</div>
